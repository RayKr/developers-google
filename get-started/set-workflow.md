# 配置持久化工作空间

在Chrome DevTools中设置持久化验证，这样文件的变动在页面上即时可见，并且通过开发者工具可以直接保存到磁盘。

你可以在Chrome DevTools中修改页面元素和样式，并且即时查看变动。默认设置下，刷新浏览器页面，所有的修改将被还原，除非你已经手动复制出并粘贴在编辑器里。

工作空间的存在，便允许你持久化所做的更改到磁盘中，而不用离开Chrome DevTools。它提供本地Web服务器到磁盘文件的资源文件映射服务，如此一来，Web页面上的修改便同步修改到磁盘文件中。

**长话短说**
* 不要手动复制变动到本地文件。使用Chrome DevTools的工作空间持久化变动到本地资源文件。
* 发布本地文件到浏览器中，映射文件到URL。
* 持久化空间一旦创建，元素样式（Style）的变动会被自动持久化；但是DOM元素并不会。元素的持久化可在资源面板（Sources）中可查看。

## 增加本地资源文件到工作空间
确保添加进资源面板（Sources）的文件是可编辑的：
1. 在面板左侧右键点击。
2. 选择**Add Folder to Workspace**(增加文件夹到工作空间)
3. 选择本地文件夹位置。
4. 点击**Allow**确认添加该文件夹。

![addfolder](https://developers.google.com/web/tools/setup/imgs/addfolder.png)

通常情况下，添加的本地的文件夹包含站点源资源文件。如果你不想更改站点源文件，那么复制出一份来作为工作空间文件夹。

## 实现持久化更改
你已经配置好本地文件夹与工作空间的映射，但是浏览器依旧是展示网络文件夹的内容。要实现在浏览器做出的修改自动保存到本地文件夹中，还必须要配置文件夹内的文件与URL的映射关系：
1. 在Sources面板左侧栏中选中网络文件夹的文件，点击鼠标右键。
2. 选择**Map to File System Resource**（映射文件系统资源文件）
3. 选择对应的本地文件
4. 刷新页面。

![maptoresource](https://developers.google.com/web/tools/setup/imgs/maptoresource.png)

这样一来，当Chrome加载被映射后的URL是，展示的是工作空间的内容，而不再是网络上内容。可以直接在浏览器里更改文件，而不用一直在浏览器和编辑器间来回切换。

## 局限性
虽然工作空间如此强大，但是我们也应该知道它的一些局限性：
* 在Elements面板中，只有样式的更改才能被持久化，而DOM的修改则不保存。
* 只有外联样式才会被保存。行内样式或`element.style`中所做的修改则不能保存。（行内样式的修改可以在Sources面板中看到。）
* 在Elements面板中所做的修改是自动保存的，不用手动**Ctrl+S**或者**Cmd+S**(Mac)来保存，当然前提是你已经配置好到本地文件的资源文件映射。
* 如果你的映射文件在远程服务器而不是本地服务器，那么当刷新页面时，Chrome会从远程服务器载入页面。但是你所做的修改依旧会持久化到磁盘，并且你如果继续在此工作空间编辑，会重载这些修改。
* 映射文件到浏览器时你必须使用全路径。即使是主页文件，URL里也必须包含`.html`，是为了可以查看各版本。

## 本地文件管理
在工作空间的文件夹里，除了可以编辑已存在的文件之外，你还可以新增或者删除文件。

### 新增文件
增加一个文件：
1. 在Sources面板左边栏右键。
2. 选择`New File`
3. 输入文件名字，包含扩展名（例如`newspricts.js`），敲击回车键保存。这个文件便新增进本地的文件夹中。

### 删除文件
删除一个文件：
1. 右键点击Sources面板左边栏。
2. 选择`Delete`，点击`Yes`，确认删除。

### 备份文件
当文件在做大量修改之前，我们一般都会备份一份，以备还原之用。

备份一个文件：
1. 右键点击Sources面板左边栏。
2. 选择**Make a Copy...**
3. 输入文件名字，包含扩展名（例如`mysytles-org.css`），回车保存。

### 刷新
